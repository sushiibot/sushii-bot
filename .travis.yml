language: rust
rust:
  - stable
  - beta
  - nightly
matrix:
  allow_failures:
    - rust: beta
    - rust: nightly
services:
  - postgresql
addons:
  postgresql: "9.6"
before_script:
  - psql -c 'create database travisdb;' -U postgres
  - cargo install diesel_cli
  - diesel migration run
env:
  DATABASE_URL=postgres://postgres@localhost/travisdb
script:
  - cargo build --verbose --all